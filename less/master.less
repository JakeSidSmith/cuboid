// out:../css/master.css

.opacity(@opacity: 1) {
  -moz-opacity: @opacity;
  -khtml-opacity: @opacity;
  -webkit-opacity: @opacity;
  opacity: @opacity;
  @opperc: @opacity * 100;
  -ms-filter: ~"progid:DXImageTransform.Microsoft.Alpha(opacity=@{opperc})";
  filter: ~"alpha(opacity=@{opperc})";
}

.transition-transform(@string1){
    -webkit-transition: @string1 -webkit-transform;
    -moz-transition: @string1 -moz-transform;
    -ms-transition: @string1 -ms-transform;
    -o-transition: @string1 -o-transform;
    transition: @string1 transform;
}

.transform-origin(@string){
    -webkit-transform-origin: @string;
    -moz-transform-origin: @string;
    -ms-transform-origin: @string;
    -o-transform-origin: @string;
    transform-origin: @string;
}

.perspective(@string){
    -webkit-perspective: @string;
    -moz-perspective: @string;
    -ms-perspective: @string;
    -o-perspective: @string;
    perspective: @string;
}

.perspective-origin(@string){
    -webkit-perspective-origin: @string;
    -moz-perspective-origin: @string;
    -ms-perspective-origin: @string;
    -o-perspective-origin: @string;
    perspective-origin: @string;
}

.transform(@string){
    -webkit-transform: @string;
    -moz-transform: @string;
    -ms-transform: @string;
    -o-transform: @string;
    transform: @string;
}

.animation(@string){
    -webkit-animation: @string;
    -moz-animation: @string;
    -ms-animation: @string;
    -o-animation: @string;
    animation: @string;
}

.transform-style(@string){
    -webkit-transform-style: @string;
    -moz-transform-style: @string;
    -ms-transform-style: @string;
    -o-transform-style: @string;
    transform-style: @string;
}

.backface-visibility(@string){
    -webkit-backface-visibility: @string;
    -moz-backface-visibility: @string;
    -ms-backface-visibility: @string;
    -o-backface-visibility: @string;
    backface-visibility: @string;
}

.border-box {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
}

* {
    .border-box;
}

body, html {
    position: absolute;
    padding: 0;
    margin: 0;
    width: 100%;
    height: 100%;
}

.viewport {
    position: relative;
    width: 100%;
    height: 100%;
    background-color: gray;
    overflow: hidden;
    .perspective-origin(50% 50%);
    .perspective(800px);
}

.cuboid {
    position: absolute;
    width: 0;
    height: 0;
    top: 50%;
    left: 50%;
    overflow: visible;
    .transform-style(preserve-3d);
    //.transform(rotateY(20deg) rotateX(-20deg));
    //.animation(linear spin 10s infinite);

    .front,
    .back,
    .top,
    .bottom,
    .left,
    .right {
        position: absolute;
        width: 100px;
        height: 100px;
        top: -50px;
        left: -50px;
        background-color: white;
        .transform-origin(50% 50%);

        .shading {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: black;
        }

        &:nth-child(1) .shading {
            .opacity(0.1);
        }
        &:nth-child(2) .shading {
            .opacity(0.2);
        }
        &:nth-child(3) .shading {
            .opacity(0.3);
        }
        &:nth-child(4) .shading {
            .opacity(0.4);
        }
        &:nth-child(5) .shading {
            .opacity(0.5);
        }
        &:nth-child(6) .shading {
            .opacity(0.6);
        }
    }

    .front {
        .transform(translateZ(50px));
    }

    .back {
        .transform(rotateY(180deg) translateZ(50px));
    }

    .top {
        .transform(rotateX(90deg) translateZ(50px));
    }

    .bottom {
        .transform(rotateX(-90deg) translateZ(50px));
    }

    .left {
        .transform(rotateY(-90deg) translateZ(50px));
    }

    .right {
        .transform(rotateY(90deg) translateZ(50px));
    }
}

@-webkit-keyframes spin {
    0% {
        .transform(rotateY(0deg) rotateX(0deg));
    }
    100% {
        .transform(rotateY(720deg) rotateX(360deg));
    }
}
